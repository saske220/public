<!doctype html><html lang=ja><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><title>Web開発基礎 教科書の補足 - Web開発基礎</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=http://localhost/favicon.png><link rel=stylesheet href=../css/style.min.daa3b8aec8c7a99f759a14401a29964600ae0cff604ea9ee320b1df1b3f63df0.css></head><body class='page page-default-single'><div id=main-menu-mobile class=main-menu-mobile><ul><li class=menu-item-top><a href=../index.html><span>TOP</span></a></li><li class=menu-item-書籍の補足><a href=../text/index.html><span>書籍の補足</span></a></li><li class=menu-item-phpとjsの文法の違い><a href=../php_js/index.html><span>PHPとJSの文法の違い</span></a></li><li class=menu-item-データベース><a href=../db/index.html><span>データベース</span></a></li></ul></div><div class=wrapper><div class=header><div class=container><div id=main-menu class=main-menu><ul><li class=menu-item-top><a href=../index.html><span>TOP</span></a></li><li class=menu-item-書籍の補足><a href=../text/index.html><span>書籍の補足</span></a></li><li class=menu-item-phpとjsの文法の違い><a href=../php_js/index.html><span>PHPとJSの文法の違い</span></a></li><li class=menu-item-データベース><a href=../db/index.html><span>データベース</span></a></li></ul></div><button id=toggle-main-menu-mobile class="hamburger hamburger--slider" type=button>
<span class=hamburger-box><span class=hamburger-inner></span></span></button></div></div><div class="container p-1 m-1"><h1 class=title>Web開発基礎 教科書の補足</h1><div class=content><h2 id=サンプルファイルをダウンロードする>サンプルファイルをダウンロードする</h2><p><a href=https://www.shoeisha.co.jp/book/detail/9784798168500>出版社のウェブページ</a> から sample_surasuraPHP2nd_2.zip をダウンロードする</p><h2 id=教科書の補足>教科書の補足</h2><h3 id=3章-p46-公開フォルダ>3章 P46: 公開フォルダ</h3><p>公開フォルダは、MAMP の場合は、アプリケーション→MAMP→htdocs</p><p>フォルダの場所を変更したい場合は(<a href=https://qiita.com/ndj/items/d837a9f20709bb5ec3d8>https://qiita.com/ndj/items/d837a9f20709bb5ec3d8</a>)</p><h3 id=3章-p47-記号>3章 P47: 記号</h3><p>&lt;?php などの記号は半角で書く。全角だと期待通りに動かない。特に全角空白は分かりにくいので注意する。</p><p>全角空白を強調表示する拡張機能 zenkaku(by mosapride) → (<a href="https://marketplace.visualstudio.com/items?itemName=mosapride.zenkaku">https://marketplace.visualstudio.com/items?itemName=mosapride.zenkaku</a>)</p><h3 id=3章-p50-52-エラー>3章 P50-52: エラー</h3><p>エラーのログ、MAMPの場合は、(<a href=https://pc-karuma.net/mamp-error-file-log-full-path/>https://pc-karuma.net/mamp-error-file-log-full-path/</a>)</p><h3 id=4章-p65-結合演算子>4章 P65: 結合演算子</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-PHP data-lang=PHP><span style=display:flex><span>$name <span style=color:#f92672>=</span> $name <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;花子&#34;</span>; <span style=color:#75715e>// ←のように書いてもOK
</span></span></span></code></pre></div><p>=の右側の処理『$name と"花子"を繋げる』を実行して、その結果を$nameに入れる
通常は左から処理していくが、=が出てきたら注意する</p><h3 id=5章-p78-リスト5-1>5章 P78: リスト5-1</h3><p>日付を変えないと何も表示されないので、 mktime(&mldr;)のところを今日の日付にする。</p><p>日本では、2024年4月1日、のように年月日の順が普通だが、英語圏だと、April 1st, 2024のように、月日年の順。</p><p>1分=60秒。1時間=3,600秒。1日=86,400秒。</p><h3 id=5章-p79-80-比較演算子>5章 P79-80: 比較演算子</h3><p>== と === で異なる例</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-PHP data-lang=PHP><span style=display:flex><span><span style=color:#66d9ef>if</span> (<span style=color:#e6db74>&#34;1&#34;</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#39;&#34;1&#34; == 1&#39;</span>; <span style=color:#75715e>// trueになるので処理される
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> (<span style=color:#e6db74>&#34;1&#34;</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#39;&#34;1&#34; === 1&#39;</span>; <span style=color:#75715e>// falseになるので処理されない
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><h3 id=5章-p91-while>5章 P91: while</h3><p>while は無限ループになりやすいので注意する。</p><ul><li>ループの条件を書く場所がいくつかに分かれる→ ループを終了する条件を書き忘れやすい。</li><li>whileでは判定条件を書く場所が決まっていない</li></ul><p><img src=../images/loop.webp alt=ループ条件></p><h3 id=6章-p105-配列>6章 P105: 配列</h3><p>配列の表示は、<code>$xxx</code> と、変数と見た目上は同じなので注意する。</p><h3 id=6章-p120-制御構文の書き方>6章 P120: 制御構文の書き方</h3><p>if endifの例</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-PHP data-lang=PHP><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span> <span style=color:#66d9ef>if</span> (<span style=color:#f92672>...</span>) <span style=color:#f92672>:</span> <span style=color:#75715e>?&gt;</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>    ...
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>&lt;?php endif; ?&gt;
</span></span></span></code></pre></div><p>foreach endforeachの例</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-PHP data-lang=PHP><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span> <span style=color:#66d9ef>foreach</span> (<span style=color:#960050;background-color:#1e0010>$</span><span style=color:#f92672>...</span> <span style=color:#66d9ef>as</span> <span style=color:#960050;background-color:#1e0010>$</span><span style=color:#f92672>...</span>) <span style=color:#f92672>:</span> <span style=color:#75715e>?&gt;</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>    ...
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>&lt;?php endforeach; ?&gt;
</span></span></span></code></pre></div><p>while endwhileの例</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-PHP data-lang=PHP><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span> <span style=color:#66d9ef>while</span> (<span style=color:#f92672>...</span>) <span style=color:#f92672>:</span> <span style=color:#75715e>?&gt;</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>    ...
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>&lt;?php endwhile; ?&gt;
</span></span></span></code></pre></div><h3 id=7章-p129-return>7章 P129: return</h3><p>return を実行したら、その関数の処理は終了。return の後に書いたコードは実行されない</p><h3 id=7章-p129-round関数>7章 P129: round関数</h3><p>似た関数がある。</p><ul><li>端数を四捨五入 : round</li><li>端数を切り捨てる : floor</li><li>端数を切り上げる : ceil</li></ul><h3 id=8章-p146-bootstrap>8章 P146: Bootstrap</h3><p>サンプルコードの Bootstrap のバージョンは古い(4.5)。現在は5系が使われる。</p><h3 id=9章-p163-ファイル書き込み>9章 P163: ファイル書き込み</h3><p>サーバーでのファイルの権限(パーミッション)も確認しておく。 → p175 column</p><h3 id=9章-p177-改行>9章 P177 改行</h3><p>PHP_EOL という定数が用意されている。こちらを使うと楽。</p><h3 id=10章-p188-inputラジオボタン>10章 P188: input(ラジオボタン)</h3><pre tabindex=0><code>&lt;input type=&#34;radio&#34; value=&#34;man&#34; name=&#34;gender&#34;&gt;男性
&lt;input type=&#34;radio&#34; value=&#34;woman&#34; name=&#34;gender&#34;&gt;女性
</code></pre><p>画面上では、『男性』『女性』と表示される。プログラム内部での処理はvalueで指定した値(manとwoman)</p><h3 id=10章-p201-画像のフォルダ>10章 P201: 画像のフォルダ</h3><p>あらかじめ album フォルダを作っておく(サーバーの設定によっては不要)</p><h3 id=11章-p219-データベース>11章 P219: データベース</h3><p>教科書ではコマンドラインから実行しているが、PhpMyAdminを使うと、GUIで操作できる</p><p><img src=../images/phpmyadmin.png alt=PhpMyAdminの例></p><p>教科書の<a href=../db/index.html>データベースを扱うコード</a>。</p><p><a href=https://qiita.com/Taku94/items/969cffd94970f9448b55>MAMPのMySQLのコマンドライン操作</a></p><h3 id=11章-p222-id主キー>11章 P222: id(主キー)</h3><p>テーブルのレコード(行)を識別する値。番号は自動採番する(AUTO_INCREMENT)</p><h3 id=11章-p228-データベースのユーザー>11章 P228: データベースのユーザー</h3><p>root以外のユーザーを作成する。ユーザーにより、操作できる範囲が異なる</p><p><img src=../images/root_user.png alt=root></p><p><img src=../images/tennis_user.png alt=tennis></p><p>※ここは作業が大変なので、省略してもOK。省略した場合は、mysqlへの接続情報をrootにする。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-PHP data-lang=PHP><span style=display:flex><span><span style=color:#75715e>// DBに接続
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>$dsn <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;mysql:host=localhost;dbname=tennis;charset=utf8&#39;</span>;
</span></span><span style=display:flex><span>$user <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;root&#39;</span>;
</span></span><span style=display:flex><span>$password <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;root&#39;</span>;
</span></span></code></pre></div><h3 id=11章-p235-日時>11章 P235: 日時</h3><p>データベース側で、現在日時をデフォルト値にできる。(CURRENT_TIMESTAMP)
<img src=../images/db_time.png alt=デフォルトを現在にする></p><p>※P235 では、PHPの関数 now() を使って現在日時を取得→データベースに渡す方式</p><h3 id=11章-p245-11-4bbsphp>11章 P245: 11-4/bbs.php</h3><p>サンプルコードの2行目の <code>include 'includes/login.php';</code> は不要なので削る。</p><p><a href=https://bitbucket.org/ounziw/webkiso2023/src/master/>bitbucket上にコードのせてあります</a></p><h3 id=12章-p261-bbsphpの修正>12章 P261: bbs.phpの修正</h3><p>サンプルコードの/12-3/bbs.php は修正前のもの。</p><h3 id=12章-p267-ログイン機能>12章 P267: ログイン機能</h3><p>実際の案件でログイン機能を自分で実装することはあまり無い(フレームワーク等を使うことが多い)
⇒授業では練習としてやってみる</p><h3 id=12章-p277-ログインファイル>12章 P277: ログインファイル</h3><p>サンプルファイルのフォルダ修正が必要</p><p>includes-login.phpを、includes/ フォルダに入れて login.php という名前にする。</p><h3 id=13章-p288-クロスサイトスクリプティング>13章 P288: クロスサイトスクリプティング</h3><p>ブラウザ側で対策(危険な可能性のあるコードを実行しない)してくれることもある。※アプリケーション側で対処しておく必要はある。</p><h3 id=13章-p290-htmlspecialchars関数>13章 P290: htmlspecialchars関数</h3><p>名前が長いので、hという名前にすることもある(hという関数を作る)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-PHP data-lang=PHP><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>h</span>( $str ) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>htmlspecialchars</span>( $str, <span style=color:#a6e22e>ENT_QUOTES</span>, <span style=color:#e6db74>&#39;UTF-8&#39;</span> );
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=14章>14章</h3><p>余裕のある人向け。教科書に書いてあるものの他、</p><ul><li>特定のユーザーの書いたコメントのみ表示する</li><li>直近〇日のお知らせのみ表示する</li></ul></div></div></div><div class=sub-footer><div class=container><div class=row><div class=col-12><div class=sub-footer-inner></div></div></div></div></div><script type=text/javascript src=../js/scripts.min.302a6fc365d5139fb98cf60bdb8f715d96257ea189161d36c190ccfa8182e569.js></script></body></html>